{
    "componentChunkName": "component---src-templates-blog-post-tsx",
    "path": "/Process (2)/",
    "result": {"data":{"site":{"siteMetadata":{"title":"Sijin.blog"}},"markdownRemark":{"id":"065a5c88-f8ad-5afe-8a80-30a20809ad62","excerpt":"Process creation & termination Process creation 일반적인 경우 부모 프로세스를 clone해서 만듦.\r\n fork(): system call creates new process 현재 프로세스 정지 현재 프로세스의 context를 복제, pid…","html":"<h3 id=\"process-creation--termination\" style=\"position:relative;\"><a href=\"#process-creation--termination\" aria-label=\"process creation  termination permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Process creation &#x26; termination</h3>\n<h4 id=\"process-creation\" style=\"position:relative;\"><a href=\"#process-creation\" aria-label=\"process creation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Process creation</h4>\n<ul>\n<li>\n<p>일반적인 경우<br>\n부모 프로세스를 clone해서 만듦.\r\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d27067cc81a4fd8ac224fcec1aca5753/6acbf/1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25.316455696202528%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA6klEQVQY042Qy0oDQRBF5/8/RzQbBZeCIAoqkwzEKJnE7pju6Zfpx4QcSS+Cj40X7uZe6lRRDb9USiHnjPceYwyz6QwhBCGEmg1a87C2TKaC64VmpQyvixe6rkMpReNTQbjIh9+htWYYBpxzFVrGkZRSXTKOY/UxX9rI7duWJ+lxu2OfSTnXrrlZWs6eVlzONcIE/qtgB9iXP3ljY2btEtLt2CqFlJIUIypEnqXnUVg2PrEfy+nC3kbue0278XzmsYIOh0N1851+HOj7Hm8N3btiMt1w3gpaYQjOnX541w9ctJKruWIb0g/gF9PEfqxB2vzAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"1\"\n        title=\"1\"\n        src=\"/static/d27067cc81a4fd8ac224fcec1aca5753/f058b/1.png\"\n        srcset=\"/static/d27067cc81a4fd8ac224fcec1aca5753/c26ae/1.png 158w,\n/static/d27067cc81a4fd8ac224fcec1aca5753/6bdcf/1.png 315w,\n/static/d27067cc81a4fd8ac224fcec1aca5753/f058b/1.png 630w,\n/static/d27067cc81a4fd8ac224fcec1aca5753/40601/1.png 945w,\n/static/d27067cc81a4fd8ac224fcec1aca5753/6acbf/1.png 1001w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>fork(): system call creates new process\n<ol>\n<li>현재 프로세스 정지</li>\n<li>현재 프로세스의 context를 복제, pid값 수정후 새로운 process 생성</li>\n<li>fork()의 return value 반환</li>\n<li>새로운 프로세스를 ready queue에 삽입</li>\n</ol>\n</li>\n<li>exec(): system call after a fork to replace the process’s memory space with a new program</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;sys/types.h></span></span>\r\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdio.h></span></span>\r\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;unistd.h></span></span>\r\n\r\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token class-name\">pid_t</span> pid<span class=\"token punctuation\">;</span>\r\n  pid <span class=\"token operator\">=</span> <span class=\"token function\">fork</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// fork a child process</span>\r\n\r\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>pid <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">/* error occurred */</span>\r\n      <span class=\"token function\">fprintf</span><span class=\"token punctuation\">(</span><span class=\"token constant\">stderr</span><span class=\"token punctuation\">,</span> “fork failed”<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token keyword\">return</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n  <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>pid <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">/* child process */</span>\r\n      <span class=\"token function\">execlp</span><span class=\"token punctuation\">(</span>“<span class=\"token operator\">/</span>bin<span class=\"token operator\">/</span>ls”<span class=\"token punctuation\">,</span> “ls”<span class=\"token punctuation\">,</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n  <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">/* parent process */</span>\r\n      <span class=\"token function\">wait</span><span class=\"token punctuation\">(</span><span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// parent will wait for the child to complete</span>\r\n      <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span>“child complete”<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n  <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>cow (copy on write)<br>\n실제로는 fork에서 모든 context의 value를 복사하는 것이 아닌, pointer structure를 만들어 부모의 code, data를 참조.<br>\ncode, data는 부모와 자식이 같은 경우가 대부분이기 때문에 굳이 copy by value로 복사할 필요가 없음. 그러나 exec등 호출로 code, data가 바뀌는 경우에는 copy by value로 reference를 지우고 새로운 내용을 덮어쓴다.</li>\n</ul>\n</li>\n<li>\n<p>첫 프로세스인 경우 (clone할 부모 프로세스가 없는 경우)</p>\n<ol>\n<li>storage에서 code, data를 가져와 memory에 올림</li>\n<li>empty stack 생성</li>\n<li>PCB 생성 및 초기화</li>\n<li>ready queue에 프로세스를 넣음</li>\n</ol>\n</li>\n</ul>\n<h4 id=\"process-termination\" style=\"position:relative;\"><a href=\"#process-termination\" aria-label=\"process termination permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Process termination</h4>\n<ul>\n<li>exit(): child process에서 status와 함께 process 종료</li>\n<li>wait(): child process의 exit함수에서 보낸 status를 회수하며 child process가 종료되었음을 확인</li>\n<li>abort(): 명시적 비정상 종료</li>\n</ul>\n<p>부모 프로세스가 wait함수로 자식 프로세스의 exit을 기다리는 것이 일반적이지만 그렇지 않은 경우 zombie 혹은 orphan process가 만들어 질 수 있음.</p>\n<ul>\n<li>zombie process: parent process가 실행 중 이지만, 아직 wait을 호출하기 전에 child process가 exit을 호출한 경우</li>\n<li>orphan process: child process가 exit을 호출하기 전에 parent process가 terminated된 경우</li>\n</ul>\n<p>child process는 대부분의 resource를 os에 반납하지만 아직 status를 return하지 못해 process table에 의미 없이 대기하게 됨. init 프로세스가 대신 수거해감으로서 해결.</p>\n<h3 id=\"ipc\" style=\"position:relative;\"><a href=\"#ipc\" aria-label=\"ipc permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>IPC</h3>\n<p>system의 몇몇 프로세스들은 서로 상호작용하며 동작해야할 필요가 있을 수 있음. 이때 상호작용하는 프로세스들은 inter-process communication (IPC)를 필요로 함.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3f8d4835a9dfa95e0fcea421ba54e707/61c63/2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75.9493670886076%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAClElEQVQ4y2WUCXPaRhSA/f//SI+kdT1J2ziNXccTfMTmEBAkbMAGhJAEQje6QF+7a5Bj58282d23T9/qHbsHZVkiJAh86vU6/X6fwWCAqqqoqkYURXJfeBV5Lu2apjIajdA0jcfxmGKzefIpSw72wCLPmBsz5oaBZZpSxTxNEioptyxti+XCxvc9losFK2fJdvsdUEzyouBulXEfQ9uKUcyI7jLhLobhMmJbFMRxjOYkaCEoVkzTCOgs1qghjNyU7aaQ0B1ww5eJx8kk4rD5wGFjxJ89g1N9zfXIwlutmOk617rPZz3mvfLIH/V7jlWDcyOlNQ8od2FLoOf5nD84nE4ijpSx1HedqTygqbvEYcB0OsWwHVq9PrcdlW+DR+pdFXX4iG7aMnwJLIocy7LQTI+eHXE7NLgZzGiObXqLmKHlEvg+WZrSNCNqs5jj7oS/lBEfOmNq84TG1JG5lcA8zwmDoMrBSynJ0gTP88izlLYVcWXEnPSmfGw/8Pne5MbOUGYrkjh6Bvq+jxhFlbbb7bOWJUmyA+Y5yXpNURTSLnpD+BQ7u5i/AO4NryXLsgooYPv22OveZ79XAV3XxfU8VmJ0vae167JauVUEm10lX8v3eweC7DgOV19v+P3wiJ9+/oVf37zlzdvfOHr3nnan+wTMMoIgkP0odL1OqrmwV0Dx2+JGfDo55eM/n/j37Iy/PxxTu7jk7PycWu1CAsXB3V6PVrvDbaPJ5dU1jWZLrrX+3XMO2SU3DEP5kbhy4j6LcGUHhGGVJ6XTpdFS+HJxKQ+/vP5KvanwTVV/BIpKZbuwTNOU6zRNZZX3PvO5yVTXpQ6HQ/TZjMl0imXbVYGqx2EvMqdL52U3vvIRaxHBD137/+PwH5mCagvsZAIkAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2\"\n        title=\"2\"\n        src=\"/static/3f8d4835a9dfa95e0fcea421ba54e707/f058b/2.png\"\n        srcset=\"/static/3f8d4835a9dfa95e0fcea421ba54e707/c26ae/2.png 158w,\n/static/3f8d4835a9dfa95e0fcea421ba54e707/6bdcf/2.png 315w,\n/static/3f8d4835a9dfa95e0fcea421ba54e707/f058b/2.png 630w,\n/static/3f8d4835a9dfa95e0fcea421ba54e707/61c63/2.png 693w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#process-creation--termination\">Process creation &#x26; termination</a></p>\n<ul>\n<li><a href=\"#process-creation\">Process creation</a></li>\n<li><a href=\"#process-termination\">Process termination</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#ipc\">IPC</a></p>\n</li>\n</ul>","frontmatter":{"title":"Process (2)","date":"May 05, 2022","description":null,"categories":["OS"]}},"previous":{"fields":{"slug":"/Process (1)/"},"frontmatter":{"title":"Process (1)"}},"next":{"fields":{"slug":"/TCP (1)/"},"frontmatter":{"title":"TCP (1)"}}},"pageContext":{"id":"065a5c88-f8ad-5afe-8a80-30a20809ad62","previousPostId":"fa1397e4-e5f8-556f-ac70-fe72c46bd84e","nextPostId":"51bdabb6-f57b-55d3-9e42-601e7c1c1288"}},
    "staticQueryHashes": ["3000541721","3646010053"]}