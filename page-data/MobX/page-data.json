{
    "componentChunkName": "component---src-templates-blog-post-tsx",
    "path": "/MobX/",
    "result": {"data":{"site":{"siteMetadata":{"title":"Sijin.blog"}},"markdownRemark":{"id":"90d1217f-25e0-55ae-83dc-052389f64336","excerpt":"복잡한 웹 어플리케이션의 전역상태를 저장하기 위해서 많은경우 상태관리 라이브러리를 사용한다. 대표적으로 Redux, MobX, React의 경우 Recoil, Context API 등 여러 선택지가 있다. 그 중 MobX를 써보고 배운점들을 정리해보았다. MobX 위 코드는 Todo…","html":"<p>복잡한 웹 어플리케이션의 전역상태를 저장하기 위해서 많은경우 상태관리 라이브러리를 사용한다. 대표적으로 Redux, MobX, React의 경우 Recoil, Context API 등 여러 선택지가 있다. 그 중 MobX를 써보고 배운점들을 정리해보았다.</p>\n<h3 id=\"mobx\" style=\"position:relative;\"><a href=\"#mobx\" aria-label=\"mobx permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MobX</h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> makeObservable<span class=\"token punctuation\">,</span> observable<span class=\"token punctuation\">,</span> action <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"mobx\"</span>\r\n\r\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Todo</span> <span class=\"token punctuation\">{</span>\r\n  id <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n  title <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span>\r\n  finished <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\r\n\r\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">title</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">makeObservable</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n      title<span class=\"token operator\">:</span> observable<span class=\"token punctuation\">,</span>\r\n      finished<span class=\"token operator\">:</span> observable<span class=\"token punctuation\">,</span>\r\n      toggle<span class=\"token operator\">:</span> action<span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> title\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token function\">toggle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>finished <span class=\"token operator\">=</span> <span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>finished\r\n  <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">TodoList</span> <span class=\"token punctuation\">{</span>\r\n  todos <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\r\n  <span class=\"token keyword\">get</span> <span class=\"token function\">unfinishedTodoCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>todos<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">todo</span> <span class=\"token operator\">=></span> <span class=\"token operator\">!</span>todo<span class=\"token punctuation\">.</span>finished<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>length\r\n  <span class=\"token punctuation\">}</span>\r\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">todos</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">makeObservable</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n      todos<span class=\"token operator\">:</span> observable<span class=\"token punctuation\">,</span>\r\n      unfinishedTodoCount<span class=\"token operator\">:</span> computed<span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>todos <span class=\"token operator\">=</span> todos\r\n  <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 코드는 Todo라는 도메인 객체와 여러개의 Todo를 관리하는 TodoList 도메인 스토어를 정의한 코드이다. 클래스의 필드와 메소드는 일반 자바스크립트 클래스와 다를 것이 없지만 makeObservable함수를 통해 MobX store로 변경된다.</p>\n<p>makeObservable함수의 두번째 인자로 전달된 객체에 observable, action, computed라는 키워드들이 있는데 아래와 같은 의미를 가진다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1f17685984e130f52da0a236b2dcae30/2c3b8/flow.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21.51898734177215%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA4ElEQVQY00WQ3UrDQBSE8/6PIPgcuRItBqEgXpSQWqvGRpsfgrvFppvdPdl8ktTiwDA383M4Udu2KK05VVsOmwd+ioyyLFHqm7us4ermheW2pakrlFK8lk8ss5ha5RTFF9VuR54kpHFMk6ZE3ntOxtDtn9HZArNfIyI4a0k2Lde3bzy+K8Ig9H3PZ7sm/bhHH2tEBkzXcchz6tWKY10T8QcJI1prvARkGBjHERhhDEAghDPFD3gnZ/V+9joRhtkP0RS8hKdF5yzW2vkaYwzG9PTWMr1mHvQe59w/rZ310vMLZFMvcH+PNUEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"flow\"\n        title=\"flow\"\n        src=\"/static/1f17685984e130f52da0a236b2dcae30/f058b/flow.png\"\n        srcset=\"/static/1f17685984e130f52da0a236b2dcae30/c26ae/flow.png 158w,\n/static/1f17685984e130f52da0a236b2dcae30/6bdcf/flow.png 315w,\n/static/1f17685984e130f52da0a236b2dcae30/f058b/flow.png 630w,\n/static/1f17685984e130f52da0a236b2dcae30/40601/flow.png 945w,\n/static/1f17685984e130f52da0a236b2dcae30/78612/flow.png 1260w,\n/static/1f17685984e130f52da0a236b2dcae30/2c3b8/flow.png 3445w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h4 id=\"observable\" style=\"position:relative;\"><a href=\"#observable\" aria-label=\"observable permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>observable</h4>\n<p>observable은 state를 저장하는 필드이자, 추적 가능한 필드임을 정의하는 주석이다. observable로 지정된 필드들은 관찰받으면서 값이 변경되면 computed를 다시 계산하고 reaction을 일으킨다.</p>\n<p>Todolist의 todos와 Todo의 title, finished가 여기에 해당한다.</p>\n<h4 id=\"action\" style=\"position:relative;\"><a href=\"#action\" aria-label=\"action permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>action</h4>\n<p>observable을 변경시키기 위한 메소드임을 정의하는 주석이다.</p>\n<p>Todo의 toggle이 여기에 해당한다.</p>\n<h4 id=\"computed\" style=\"position:relative;\"><a href=\"#computed\" aria-label=\"computed permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>computed</h4>\n<p>computed는 getter에 정의되는 주석으로, 관련된 observable이 변경되었을 때 필요한 값을 계산하고 캐싱해준다.</p>\n<p>TodoList의 unfinishedTodoCount가 여기에 해당한다.</p>\n<h4 id=\"reaction\" style=\"position:relative;\"><a href=\"#reaction\" aria-label=\"reaction permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>reaction</h4>\n<p>reaction은 특정 observable state에 변화가 일어날 때 자동적으로 실행되는 부수효과를 말한다. autorun이나 reaction, when 등을 사용할 수 있는데 autorun의 사용방법은 아래와 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">autorun</span><span class=\"token punctuation\">(</span><span class=\"token function-variable function\">effect</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">reaction</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>autorun을 정의하게 되면 effect 함수 내에서 쓰이는 observable들이 action을 통해 변경될 때 해당 effect 함수가 실행되게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> myTodo <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Todo</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"myTodo\"</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token keyword\">const</span> todoAutorun <span class=\"token operator\">=</span> <span class=\"token function\">autorun</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>myTodo<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> myTodo<span class=\"token punctuation\">.</span>finished<span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\nmyTodo<span class=\"token punctuation\">.</span><span class=\"token function\">toggle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">getDependencyTree</span><span class=\"token punctuation\">(</span>todoAutorun<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>위 코드처럼 autorun의 effect함수가 myTodo의 id와 finished를 읽고있을 때, myTodo.toggle이 실행되면서 myTodo의 finished가 변경되었고 autorun의 effect함수가 실행되어 myTodo의 id와 finished가 콘솔에 출력되었음을 볼 수 있다.</p>\n<p>이때 autorun은 어떤 observable의 변화를 감지하는지 확인하기 위해 getDependencyTree로 종속성 트리를 가져왔을 때 dependencies로 Todo의 finished가 있고 Todo의 finished가 변경되었을 때 effect함수가 실행됨을 확인할 수 있다.</p>\n<p>Todo의 makeObservable에서 id는 observable로 지정해주지 않았기 때문에 Todo.id는 effect 함수에서 사용됨에도 종속성 트리에 포함되지 않고 같은 의미로 id가 변경되어도 effect함수가 실행되지 않는다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 527px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6cd0c82b5f96d31bfcf6e095b6cfc914/44385/capture.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.59493670886076%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABPElEQVQoz52R2XLDIAxF+f9vbFPH7KsRCJo4Bjqpk3amy3Q5TxfE0TASmY7zw0SPTB6O7PFpfpzmiXKuLFeWScPugX8VCJdKaiuUmZlQNhxmeZildoFxaXwQSu+BCkm5UMYp42YqriWpyDRTZYy2Vig5MXFg7kmEiDVCylhSQoCEpQLkCCllzFji7QaI1oELL2RQOnLhgodaau+ttbZduYV2Z897iVhTmchcIJeoVHGuns9tjN5b772PK/07SIzRKVftUqgsUgKAcz7ljFgwY4xBedTQX3uMD5DtstlJe2YXGap3gVK0bkuwPtf9de/jk3WXxxh5yZ7bEPP6XE8AGJYTQLtcvnPe5d66pSaHEDmPlGJKCctl28YvIOu6euUyJLAWw+KdO5/O19+2/rO8z3P8C7Kv4u3c+x8avQAcMLK5KYFqCAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"capture\"\n        title=\"capture\"\n        src=\"/static/6cd0c82b5f96d31bfcf6e095b6cfc914/44385/capture.png\"\n        srcset=\"/static/6cd0c82b5f96d31bfcf6e095b6cfc914/c26ae/capture.png 158w,\n/static/6cd0c82b5f96d31bfcf6e095b6cfc914/6bdcf/capture.png 315w,\n/static/6cd0c82b5f96d31bfcf6e095b6cfc914/44385/capture.png 527w\"\n        sizes=\"(max-width: 527px) 100vw, 527px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h4 id=\"makeautoobservable\" style=\"position:relative;\"><a href=\"#makeautoobservable\" aria-label=\"makeautoobservable permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>makeAutoObservable</h4>\n<p>클래스의 각 요소가 observable, action, computed 중 어느것에 해당하는지 정의해야 하는 makeObservable함수와 달리 makeAutoObservable함수를 사용하면 각 요소에 대해 주석을 지정해주지 않아도 각 요소의 역할을 추론해 정의해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> makeObservable<span class=\"token punctuation\">,</span> observable<span class=\"token punctuation\">,</span> action <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"mobx\"</span>\r\n\r\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">TodoList</span> <span class=\"token punctuation\">{</span>\r\n  todos <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\r\n  <span class=\"token keyword\">get</span> <span class=\"token function\">unfinishedTodoCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>todos<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">todo</span> <span class=\"token operator\">=></span> <span class=\"token operator\">!</span>todo<span class=\"token punctuation\">.</span>finished<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>length\r\n  <span class=\"token punctuation\">}</span>\r\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">todos</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">makeAutoObservable</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>todos <span class=\"token operator\">=</span> todos\r\n  <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"react-적용\" style=\"position:relative;\"><a href=\"#react-%EC%A0%81%EC%9A%A9\" aria-label=\"react 적용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>React 적용</h3>\n<p>“mobx-react-lite” 라이브러리의 observer HoC로 React에서 MobX를 사용할 수 있다. observer HoC는 React 컴포넌트의 렌더링 중 사용되는 모든 observable을 구독시켜 해당 observable이 변경되면 컴포넌트를 다시 렌더링한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> MyComponent <span class=\"token operator\">=</span> <span class=\"token function\">observer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> todo <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>todo<span class=\"token punctuation\">.</span>finished <span class=\"token operator\">?</span> <span class=\"token string\">\"finished\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\r\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>todo<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\r\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\r\n  <span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>위 코드의 경우엔 todo를 props로 가져왔지만, observable이 어디서 어떤 방식으로 전해지는지 상관이 없기 때문에 props로 전달하는 방식 외에도 전역변수나 React Context 등을 사용할 수 있다. 아래는 React Context를 사용한 예시이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// App.js</span>\r\n<span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> createContext <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> TodoContext <span class=\"token operator\">=</span> <span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token keyword\">const</span> state <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Todo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n    <span class=\"token operator\">&lt;</span>TodoContext<span class=\"token punctuation\">.</span>Provider value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>state<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n      <span class=\"token operator\">&lt;</span>MyComponent <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>TodoContext<span class=\"token punctuation\">.</span>Provider<span class=\"token operator\">></span>\r\n  <span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// MyComponent.jsx</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> TodoContext <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./App.js\"</span>\r\n<span class=\"token keyword\">const</span> MyComponent <span class=\"token operator\">=</span> <span class=\"token function\">observer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> todo <span class=\"token operator\">=</span> <span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>TodoContext<span class=\"token punctuation\">)</span>\r\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>todo<span class=\"token punctuation\">.</span>finished <span class=\"token operator\">?</span> <span class=\"token string\">\"finished\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\r\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>todo<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\r\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\r\n  <span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"느낀점\" style=\"position:relative;\"><a href=\"#%EB%8A%90%EB%82%80%EC%A0%90\" aria-label=\"느낀점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>느낀점</h3>\n<p>Redux의 경우엔 action, reducer 등 작성할 코드의 양이 MobX에 비교해서 많고 값을 변경할 때 불변성을 지키는데 적지않은 노력이 들어갔는데 그에반해 MobX는 코드도 간결하고 불변성을 신경쓰지 않아도 된다는 점이 편리했다.</p>\n<p>그러나 버전이 바뀌면서 바뀐 내용이 많아서인지 2-3년 전에 작성된 블로그 글이 공식문서와 내용 차이가 있는 경우가 많았고 자유도가 높아서 다양한 활용방법 중 어느 것이 정답인지 혼란스러웠다.</p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#mobx\">MobX</a></p>\n<ul>\n<li><a href=\"#observable\">observable</a></li>\n<li><a href=\"#action\">action</a></li>\n<li><a href=\"#computed\">computed</a></li>\n<li><a href=\"#reaction\">reaction</a></li>\n<li><a href=\"#makeautoobservable\">makeAutoObservable</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#react-%EC%A0%81%EC%9A%A9\">React 적용</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%8A%90%EB%82%80%EC%A0%90\">느낀점</a></p>\n</li>\n</ul>","frontmatter":{"title":"MobX","date":"March 22, 2022","description":null,"categories":["React"]}},"previous":{"fields":{"slug":"/다크모드 적용기/"},"frontmatter":{"title":"다크모드 적용기"}},"next":{"fields":{"slug":"/Named Parameters/"},"frontmatter":{"title":"Named Parameters"}}},"pageContext":{"id":"90d1217f-25e0-55ae-83dc-052389f64336","previousPostId":"feb6a0f4-43c5-599a-8a7d-caf729468713","nextPostId":"4cf3eefe-b50b-5d5c-968a-0a161329cd75"}},
    "staticQueryHashes": ["3000541721","3646010053"]}