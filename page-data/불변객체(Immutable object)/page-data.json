{
    "componentChunkName": "component---src-templates-blog-post-tsx",
    "path": "/불변객체(Immutable object)/",
    "result": {"data":{"site":{"siteMetadata":{"title":"Sijin.blog"}},"markdownRemark":{"id":"6cb4cc11-3a81-5261-aa95-2cbf49ed31fd","excerpt":"불변성의 사전적의미는 말그래로 상태가 변하지 않음을 의미한다. 사전적 의미는 간단하지만 그에비해 이 개념을 처음 접할때 이해가 쉽지 않다. 그러나 자바스크립트에서 객체를 변경하거나 복사, 비교하는 등의 동작 거의 대부분에 사용되는 개념이라 React…","html":"<p>불변성의 사전적의미는 말그래로 상태가 변하지 않음을 의미한다.</p>\n<p>사전적 의미는 간단하지만 그에비해 이 개념을 처음 접할때 이해가 쉽지 않다. 그러나 자바스크립트에서 객체를 변경하거나 복사, 비교하는 등의 동작 거의 대부분에 사용되는 개념이라 React같은 라이브러리에서도 중요하게 다루고 있기 때문에 모르면 ‘이게 왜 안돼?‘를 유발할 수 있는 중요한 개념이다.</p>\n<h3 id=\"불변성\" style=\"position:relative;\"><a href=\"#%EB%B6%88%EB%B3%80%EC%84%B1\" aria-label=\"불변성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>불변성</h3>\n<p>자바스크립트에서 number같은 원시자료형의 값이 변경될 때 동작하는 방식을 살펴보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">var num\r\nnum = 5\r\nnum = 15</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b076cc88944a7237c2d9185dbd4003b9/f1c64/1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20.88607594936709%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAu0lEQVQY03WQSaqFUAxE3f9GFJ3ryEUIgoIg4sAWse+belSN/uQHQkKSU8m9Bv7Y+754nkfxui5EUYQkSTCOI+Z5xrquOM8TaZoiDEP0fY9pmrBtm3rkjKZp4HkegiAAcw4RYm7bNlzXlWhd1wL3fde8ZVmI4xh5nqtOYR5jtG0L3/clOAyD/DgOCTqOI7iqKnRdJ2hZFtVM00SWZZpjj1EX4h/7vg9lWYIL7/vWF9AJUaAoCr2ENUY6mR8PHCp47DUvJwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"1\"\n        title=\"1\"\n        src=\"/static/b076cc88944a7237c2d9185dbd4003b9/f058b/1.png\"\n        srcset=\"/static/b076cc88944a7237c2d9185dbd4003b9/c26ae/1.png 158w,\n/static/b076cc88944a7237c2d9185dbd4003b9/6bdcf/1.png 315w,\n/static/b076cc88944a7237c2d9185dbd4003b9/f058b/1.png 630w,\n/static/b076cc88944a7237c2d9185dbd4003b9/40601/1.png 945w,\n/static/b076cc88944a7237c2d9185dbd4003b9/78612/1.png 1260w,\n/static/b076cc88944a7237c2d9185dbd4003b9/f1c64/1.png 1390w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>사진에서 알 수 있듯이 변수 num이 5에서 15로 바뀔 때 주소 @1000이 참조하고 있는 주소가 @2000에서 @2001로 대체된 것을 알 수 있다.</p>\n<p>여기서 주목할 점은 num이 참조하고 있던 기존 5라는 데이터는 지워지고 15라는 데이터로 새로 덮어쓰기 되어서 num이 가르키고 있는 값이 5에서 15로 변경된 뿐 만 아니라 num이 참조하고 있는 주소 또한 변경되었다는 점이다.</p>\n<p>즉, 우리는 위 코드로 5를 변경한 것이 아니라 5는 지워지고 15로 대체 한 것이며, 5라는 데이터의 상태가 변경되지 않았고 그대로 5였기 때문에 우리는 num을 15로 변경할 때 불변성을 만족시키며 데이터를 바꾼 셈이다.</p>\n<p>사실 원시자료형의 데이터는 값을 객체처럼 더이상 쪼갤 수 없고 따라서 값을 변경하려면 위 예시처럼 새로운 값으로 대체하는 수 밖에 없기 때문에 원시자료형 데이터의 변경은 모든 경우에서 불변성을 만족한다.</p>\n<p>그러나 객체의 경우 불변성을 만족하지 않은 채 상태를 변경시킬 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">var obj = {\r\n  name: 'Amumu',\r\n  level: 3\r\n}\r\nobj.level = 4</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/41e6eb6a05ed5bbe075591186ce3eb45/f470a/2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18.9873417721519%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAsUlEQVQY022PSQqEMBREc/+zOCwVIYjHENSgwRHFEXFXUh8ivehFSKBealBJkqAoCrRti+u6sK4rzvOUe9s27PsOrTWyLENd15im6dOpkTmO4/ungiAQw2EYBKDg4Pu+sSwLwjAEg5umwTzPYsLj3uRZ5nkeKM/zYIxB3/foug7jOEoiQUJs5Ps+4jiWFdSttRL0u8IVUFEUIc9zgcqyFGM3nRDN2S5NU1RV9XE0/Df5BbOAJb+vjA/eAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2\"\n        title=\"2\"\n        src=\"/static/41e6eb6a05ed5bbe075591186ce3eb45/f058b/2.png\"\n        srcset=\"/static/41e6eb6a05ed5bbe075591186ce3eb45/c26ae/2.png 158w,\n/static/41e6eb6a05ed5bbe075591186ce3eb45/6bdcf/2.png 315w,\n/static/41e6eb6a05ed5bbe075591186ce3eb45/f058b/2.png 630w,\n/static/41e6eb6a05ed5bbe075591186ce3eb45/40601/2.png 945w,\n/static/41e6eb6a05ed5bbe075591186ce3eb45/78612/2.png 1260w,\n/static/41e6eb6a05ed5bbe075591186ce3eb45/f470a/2.png 1443w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>obj의 프로퍼티 level이 3에서 4로 변경되었다.</p>\n<p>이때 @3001에 위치한 obj.level은 원시자료형 number이고 불변성을 만족하며 변경되었지만, @1000에 위치한 객체 obj가 참조하고 있는 주소는 obj.level 변경 전후 모두 @2000로 같다.</p>\n<p>obj.level이 변경되어 obj는 상태가 변경되었으므로 불변성을 만족하지 못했다고 할 수 있다.</p>\n<h3 id=\"불변객체\" style=\"position:relative;\"><a href=\"#%EB%B6%88%EB%B3%80%EA%B0%9D%EC%B2%B4\" aria-label=\"불변객체 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>불변객체</h3>\n<p>객체를 불변성을 만족시키며 내부 프로퍼티를 변경하기 위해서는 새로운 객체를 만들어 재할당 하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">var obj = {\r\n  name: 'Amumu',\r\n  level: 3\r\n}\r\n\r\nobj = {\r\n  name: 'Amumu',\r\n  level: 4\r\n}</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/291cd4aa2b1371cc7bf15aad3c0d388c/6774c/3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 19.62025316455696%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAvElEQVQY002POQqGUAyEvf81vIJLJRZ6Awu1UsR93wWb+ZkB4S/C5L1MviRGGIYIggBlWaLve5zniWVZsG2b9LouDMMA13WRpimqqlKwvq6rdN935VTDtm2ZCRzHUZ80zfMs+Pu+KIoCpmkiiiLlDA5hsKdtWyn7DMuyBGyaRoW6rjFNk4A0PM+DLMsETJJEHg7vuk7BNy/jNcdxwPB9H57nIc9zGakf7P9kx3EQx7EA3PCDchEOpe++b/wArJEkYA34aDQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"3\"\n        title=\"3\"\n        src=\"/static/291cd4aa2b1371cc7bf15aad3c0d388c/f058b/3.png\"\n        srcset=\"/static/291cd4aa2b1371cc7bf15aad3c0d388c/c26ae/3.png 158w,\n/static/291cd4aa2b1371cc7bf15aad3c0d388c/6bdcf/3.png 315w,\n/static/291cd4aa2b1371cc7bf15aad3c0d388c/f058b/3.png 630w,\n/static/291cd4aa2b1371cc7bf15aad3c0d388c/40601/3.png 945w,\n/static/291cd4aa2b1371cc7bf15aad3c0d388c/78612/3.png 1260w,\n/static/291cd4aa2b1371cc7bf15aad3c0d388c/6774c/3.png 1391w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>obj의 프로퍼티를 변경한 것이 아닌 obj 데이터 자체를 새로운 객체를 만들어 재할당했다.</p>\n<p>기존 obj가 저장되어있던 @1000의 데이터와 참조되던 데이터들 중 더이상 필요없는 데이터는 GC에 의해 제거되고 @1001에 새로운 객체 obj가 저장되었다. 객체 obj는 새로운 데이터로 할당된 것이지, 상태가 변경된 것이 아니기 때문에 불변성을 만족했다고 할 수 있다.</p>\n<h4 id=\"변수-복사\" style=\"position:relative;\"><a href=\"#%EB%B3%80%EC%88%98-%EB%B3%B5%EC%82%AC\" aria-label=\"변수 복사 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>변수 복사</h4>\n<p>불변성을 지키지 않고 변수를 복사하면 원본과 복사된 사본이 모두 같은 주소를 참조한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">var obj = {\r\n  name: 'Amumu',\r\n  level: 3\r\n}\r\n\r\nvar copiedObj = obj\r\ncopiedObj.name = 'Teemo'\r\n\r\nconsole.log(obj.name, copiedObj.name) // 'Teemo', 'Teemo'\r\nconsole.log(obj === copiedObj) // true</code></pre></div>\n<p>이는 객체같은 참조자료형 데이터를 불변성을 지키지 않은 채 복사했을때 원본을 바꾸면 사본이 바뀌고, 사본을 바꾸면 원본이 바뀌도록 동작한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const copyObj = (target) => {\r\n  return {...target}\r\n}\r\n\r\nvar obj = {\r\n  name: 'Amumu',\r\n  level: 3\r\n}\r\n\r\nvar copiedObj = copyObj(obj)\r\n\r\ncopiedObj.name = 'Teemo'\r\n\r\nconsole.log(obj.name, copiedObj.name) // 'Amumu', 'Teemo'\r\nconsole.log(obj === copiedObj) // false</code></pre></div>\n<p>그러나 불변성을 지킨 불변객체의 경우 원본과 사본이 참조하는 주소가 다르기 때문에 서로 값이 바뀌어도 서로 영향을 주지 않는다.</p>\n<h4 id=\"얕은-비교\" style=\"position:relative;\"><a href=\"#%EC%96%95%EC%9D%80-%EB%B9%84%EA%B5%90\" aria-label=\"얕은 비교 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>얕은 비교</h4>\n<p>얕은 비교는 객체를 비교할 때, 객체가 가진 프로퍼티들의 값은 상관 없이 객체가 참조하고 있는 주소만을 비교하는 비교방법이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">var objA = {\r\n  name: 'Amumu',\r\n  level: 3\r\n}\r\n\r\nvar objB = {\r\n  name: 'Amumu',\r\n  level: 3\r\n}\r\n\r\nconsole.log(objA === objB) // false</code></pre></div>\n<p>예를들어, 위 코드에서 objA와 objB는 서로 가지고있는 프로퍼티가 같지만, 서로 다른 주소를 참조하고 있기 때문에 비교연산자가 false를 반환한다.</p>\n<p>얕은 비교는 객체를 비교함에 있어 계산 리소스를 줄여줄 뿐 만 아니라 객체의 프로퍼티가 다른 객체와 서로 참조해 사이클을 이루어 무한한 깊이를 가질때에도 비교를 할 수 있게 해준다.</p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EB%B6%88%EB%B3%80%EC%84%B1\">불변성</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%B6%88%EB%B3%80%EA%B0%9D%EC%B2%B4\">불변객체</a></p>\n<ul>\n<li><a href=\"#%EB%B3%80%EC%88%98-%EB%B3%B5%EC%82%AC\">변수 복사</a></li>\n<li><a href=\"#%EC%96%95%EC%9D%80-%EB%B9%84%EA%B5%90\">얕은 비교</a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"불변객체(Immutable object)","date":"January 10, 2022","description":null,"categories":["JS"]}},"previous":{"fields":{"slug":"/변수 선언, 데이터 할당 과정/"},"frontmatter":{"title":"변수 선언, 데이터 할당 과정"}},"next":{"fields":{"slug":"/반응형 이미지/"},"frontmatter":{"title":"반응형 이미지"}}},"pageContext":{"id":"6cb4cc11-3a81-5261-aa95-2cbf49ed31fd","previousPostId":"7f1643f4-58a2-540f-b48c-c72086afc106","nextPostId":"e7dada61-be2f-5835-a74c-863bcd4151a4"}},
    "staticQueryHashes": ["3000541721","3646010053"]}